define(["dInherit","dValidate"],function(e,t){var n={prefix:"ui-",getBiggerZindex:function(){var e=3e3;return function(){return++e}}()},r=t.isFunction,i;return i=e({__propertys__:function(){this._id,this.opt,this.tplFunc,this.$el,this.animation=Ancients.animation,this._eventQueue=[]},events:{},initialize:function(){this._id=n.prefix+(new Date).getTime(),this.initEvents()},getUniqueId:function(){return this._id},setOptions:function(e){var t=this;this.opt=e||{};try{this.$el=$(this.tplFunc(this.opt)).css({"z-index":n.getBiggerZindex(),display:"none"}),$.each(this._eventQueue,function(e,n){t.bindEvent(n.type,n.selector,n.handler)})}catch(r){Ancients.syslog.error(r.stack),this.$el=$()}finally{this._eventQueue=[]}},show:function(){r(this.onShow)&&this.onShow(),this.$el.show()},hide:function(){this.$el.hide(),r(this.onHide)&&this.onHide()},bindEvent:function(e,t,n){arguments.length===2&&(n=t,t=null);if(!r(n))return;this.$el?t?this.$el.on(e,t,n):this.$el.on(e,n):this._eventQueue.push({type:e,selector:t,handle:$.proxy(n,this)})},initEvents:function(){var e,n,r,i;if(this.hasOwnProperty("events"))for(var s in this.events){s=s.trim();if(t.isEmptyStr(s))continue;i=s.split(" "),i.length===1?(e=s,n=null):i.length===2&&(e=i[0],n=i[1]),r=this.events[s],t.isString(r)&&(r=this[r]);if(!t.isFunction(r))continue;this._eventQueue.push({type:e,selector:n,handle:$.proxy(r,this)})}},destory:function(){this.$el.off(),this.$el.remove(),this._eventQueue=undefined}}),i});